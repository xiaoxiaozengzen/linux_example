# Overview

Linux 提供的 inotify 是一种异步文件监控机制，可以用来监控文件系统的事件，包括访问、读写、权限、删除、移动等事件。

inotify 既可以监控单个文件，也可以监控整个目录，当监控的对象是一个目录的时候，目录本身和目录下的文件/文件夹都是被监控的对象。但是不能递归监控子目录，如果想要监控子目录下的文件，需要自己通过递归的方法将所有子目录都添加到监控中。

此种机制出现的目的是当内核空间发生某种事件之后，可以立即通知到用户空间，方便用户对此做出相应的操作。

# 实现

inotify 是一个内核用于通知用户空间程序文件系统变化的机制。

inotify 的实现过程总结为以下两点：
* 当用户调用读写、创建或删除的系统调用时，内核会注入相应的事件触发函数来产生一个事件，并且添加到 inotify 的事件队列中。
* 唤醒等待读取事件的进程，当进程被唤醒后，用户就可以通过调用 read 函数来读取 inotify 事件队列中的事件，进而获知文件的变化。

# 修改文件的操作属性

access：
* 文件最后一次被访问的时间。
* 读取文件操作(cat，less，grep等)都会修改。纯粹的access不会影响modify跟change，但是会收到modify影响

modify：
* 文件最后一次内容被修改的时间
* 其发生在文件内容发生变化的时候，其改变也会导致acess与change的修改

change：
* 文件最后一次元数据的修改时间
* 对文件进行mv、chown会修改该时间，其也会被modify影响

